### Compile

## test_ppk
gcc -Wall -Wextra -c ppk.c
gcc -Wall -Wextra -c test_ppk.c
gcc -o test_ppk ppk.o test_ppk.o -lcrypto

## test_ppal_map

cd xip

# Test
gcc -Wall -Wextra -c -I ../kernel-include \
-DPRINCIPAL_FILENAME=\"../etc-test/xia/principals\" ppal_map.c
# Production
gcc -Wall -Wextra -c -I ../kernel-include ppal_map.c

gcc -Wall -Wextra -c -I ../kernel-include dag.c
gcc -Wall -Wextra -c -I ../kernel-include test_ppal_map.c
gcc -o test_ppal_map ppal_map.o dag.o test_ppal_map.o

## xip

# Test
gcc -Wall -Wextra -c -I ../kernel-include \
-DPRINCIPAL_FILENAME=\"../etc-test/xia/principals\" ppal_map.c
gcc -Wall -Wextra -c -I ../kernel-include \
-DHID_PRV_PATH=\"../etc-test/xia/hid/prv/\" xiphid.c
# Production
gcc -Wall -Wextra -c -I ../kernel-include ppal_map.c
gcc -Wall -Wextra -c -I ../kernel-include xiphid.c

gcc -Wall -Wextra -c ppk.c
gcc -Wall -Wextra -c -I ../kernel-include dag.c
gcc -Wall -Wextra -c -I ../kernel-include xipad.c
gcc -Wall -Wextra -c utils.c
# libnetlink.c has warning when -Wextra is used.
gcc -Wall -c libnetlink.c
gcc -Wall -Wextra -c ll_map.c
gcc -Wall -Wextra -c xip.c
gcc -o xip ppk.o ppal_map.o dag.o utils.o libnetlink.o ll_map.o \
xiphid.o xipad.o xip.o -lcrypto

### Clean

rm -f *.o *.pem xip test_ppk test_ppal_map
